<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Math Market Challenge üõçÔ∏è ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡πÅ‡∏ü‡∏£‡πå (‡∏™‡∏∏‡πà‡∏°‡∏ä‡πâ‡∏≠‡∏¢‡∏™‡πå)</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#eafcf4; --bg2:#fffbe7; --ink:#0b1222; --muted:#0f766e;
  --wire:rgba(6,95,70,.2); --accent:#34d399; --accent2:#fde047; --danger:#ef4444; --ok:#16a34a;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:"Kanit","Noto Sans Thai",sans-serif;color:var(--ink);
  background:radial-gradient(1200px 720px at 50% -10%,#dcfce7 0%,var(--bg1) 50%,var(--bg2) 100%);
}
.wrap{max-width:900px;margin:auto;padding:20px}
header{text-align:center;margin-bottom:16px}
.brand{font-weight:900;font-size:clamp(22px,5vw,40px);
  background:linear-gradient(90deg,#10b981,#ef4444,#f59e0b,#10b981);
  -webkit-background-clip:text;color:transparent;text-shadow:0 8px 24px rgba(0,0,0,.08);
}
.subtitle{color:var(--muted);font-size:clamp(14px,3vw,18px)}

.hud{display:flex;justify-content:space-between;align-items:center;gap:10px;
  border:1.5px solid var(--wire);border-radius:12px;
  background:linear-gradient(180deg,rgba(255,255,255,.9),rgba(255,255,255,.8));
  box-shadow:0 8px 20px rgba(0,0,0,.05);padding:10px 14px;margin-bottom:14px}
.score{font-weight:900;color:#a16207}
.combo{font-weight:900;color:#065f46}

.card{border:1.5px solid var(--wire);border-radius:18px;
  background:linear-gradient(180deg,rgba(255,255,255,.95),rgba(255,255,255,.88));
  padding:18px;box-shadow:0 16px 48px rgba(0,0,0,.08)}
.btn{border:none;border-radius:14px;cursor:pointer;
  font-weight:900;font-size:18px;padding:12px 18px;
  background:linear-gradient(145deg,#a7f3d0,#fde68a);color:#064e3b;
  box-shadow:0 8px 0 #d9f99d,0 18px 30px rgba(0,0,0,.08)}
.btn:active{transform:translateY(2px)}

.choice{position:relative;border:2px solid rgba(6,95,70,.15);
  background:linear-gradient(145deg,rgba(167,243,208,.25),rgba(254,240,138,.3));
  padding:14px;border-radius:14px;cursor:pointer;font-weight:900;
  box-shadow:0 8px 20px rgba(0,0,0,.08);transition:transform .06s,box-shadow .2s}
.choice:hover{transform:translateY(-2px)}
.choice.correct{outline:3px solid var(--ok)}
.choice.wrong{outline:3px solid var(--danger)}

.next{background:linear-gradient(90deg,#bef264,#fef08a);font-weight:900;
  border:none;padding:12px 20px;border-radius:12px;cursor:pointer}
.status{margin-top:12px;font-weight:800}
.oktxt{color:#15803d}.badtxt{color:#b91c1c}
.panel.show{display:block;animation:fade .3s ease}
@keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
canvas.fire{position:fixed;inset:0;pointer-events:none}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">Math Market Challenge üõçÔ∏è ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡πÅ‡∏ü‡∏£‡πå</div>
    <div class="subtitle">3 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Ä¢ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ ‚Ä¢ ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‚Ä¢ ‡∏°‡∏µ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö + ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡πÑ‡∏ü</div>
  </header>

  <div class="hud">
    <div class="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="total">0</span></div>
    <div class="combo">‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö: <span id="combo">x1.0</span></div>
  </div>

  <section id="home" class="card">
    <h2>‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡πÅ‡∏ü‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á? üí∏</h2>
    <button class="btn" id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° üéÆ</button>
  </section>

  <section id="quiz" class="card" style="display:none">
    <div id="caseId">Q-01</div>
    <div id="stem" class="stem">‚Äî</div>
    <div id="choices"></div>
    <div class="status" id="status"></div>
    <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
      <button class="next" id="nextBtn" disabled>‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
      <div>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ: <span id="slot">5</span></div>
    </div>
  </section>

  <section id="end" class="card" style="display:none;text-align:center">
    <h2>Mission Complete!</h2>
    <p id="endMsg"></p>
    <button class="btn" onclick="location.reload()">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üîÅ</button>
  </section>
</div>
<canvas id="fire1" class="fire"></canvas>

<script>
const ITEMS=[
{id:'001',stem:'‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡πâ‡∏°‡∏°‡∏≤ 405 ‡∏ö‡∏≤‡∏ó ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÑ‡∏£ 20% ‡∏Ñ‡∏ß‡∏£‡∏Ç‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['486 ‡∏ö‡∏≤‡∏ó','485 ‡∏ö‡∏≤‡∏ó','492 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'002',stem:'‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏û‡πá‡∏Ñ‡∏•‡∏∞ 36 ‡∏ö‡∏≤‡∏ó ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÑ‡∏£ 25% ‡∏Ç‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['45 ‡∏ö‡∏≤‡∏ó','42 ‡∏ö‡∏≤‡∏ó','44 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'003',stem:'‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á 4,000 ‡∏ö‡∏≤‡∏ó ‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£ 1,000 ‡∏ö‡∏≤‡∏ó ‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['25%','40%','20%'],key:0},
{id:'004',stem:'‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏Å‡∏¥‡πÇ‡∏•‡∏•‡∏∞ 140 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î 15% ‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['119 ‡∏ö‡∏≤‡∏ó','125 ‡∏ö‡∏≤‡∏ó','120 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'005',stem:'‡∏ï‡∏¥‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ 120 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î‡πÉ‡∏´‡πâ 15 ‡∏ö‡∏≤‡∏ó ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå?',opts:['12.5%','15%','10%'],key:0},
{id:'006',stem:'‡∏ó‡∏∏‡∏ô 250 ‡∏ö‡∏≤‡∏ó ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÑ‡∏£ 10% ‡∏Ñ‡∏ß‡∏£‡∏Ç‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['275 ‡∏ö‡∏≤‡∏ó','260 ‡∏ö‡∏≤‡∏ó','265 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'007',stem:'‡∏ó‡∏∏‡∏ô 21,000 ‡∏ö‡∏≤‡∏ó ‡∏Ç‡∏≤‡∏¢‡∏Å‡∏≥‡πÑ‡∏£ 35% ‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['7,350 ‡∏ö‡∏≤‡∏ó','3,500 ‡∏ö‡∏≤‡∏ó','6,300 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'008',stem:'‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∑‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏±‡∏ß‡∏•‡∏∞ 350 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ 12% ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['308 ‡∏ö‡∏≤‡∏ó','320 ‡∏ö‡∏≤‡∏ó','300 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'009',stem:'‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô 18 ‡∏ö‡∏≤‡∏ó ‡∏Ç‡∏≤‡∏¢ 24 ‡∏ö‡∏≤‡∏ó ‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['33‚Öì%','25%','20%'],key:0},
{id:'010',stem:'‡∏ß‡∏∏‡πâ‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤ 20% ‡∏à‡∏≤‡∏Å 60 ‡∏ö‡∏≤‡∏ó ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['48 ‡∏ö‡∏≤‡∏ó','50 ‡∏ö‡∏≤‡∏ó','46 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'011',stem:'‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô 2,450 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤ 40% ‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['1,470 ‡∏ö‡∏≤‡∏ó','1,000 ‡∏ö‡∏≤‡∏ó','1,540 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'012',stem:'‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏Ç‡∏ß‡∏î‡∏•‡∏∞ 60 ‡∏ö‡∏≤‡∏ó ‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô‡∏Ç‡∏ß‡∏î‡∏•‡∏∞ 3 ‡∏ö‡∏≤‡∏ó ‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô‡∏Å‡∏µ‡πà‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå?',opts:['5%','3%','4%'],key:0},
{id:'013',stem:'‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô 3,220 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ 10% ‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['2,898 ‡∏ö‡∏≤‡∏ó','2,884 ‡∏ö‡∏≤‡∏ó','2,980 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'014',stem:'‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ 200 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î 25% ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['150 ‡∏ö‡∏≤‡∏ó','175 ‡∏ö‡∏≤‡∏ó','125 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'015',stem:'‡∏Ç‡∏≤‡∏¢‡∏´‡∏°‡∏ß‡∏Å‡πÑ‡∏î‡πâ 360 ‡∏ö‡∏≤‡∏ó ‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏∏‡∏ô 300 ‡∏ö‡∏≤‡∏ó ‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['20%','25%','16‚Öî%'],key:0},
{id:'016',stem:'‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏•‡∏î‡∏à‡∏≤‡∏Å 175 ‡∏ö‡∏≤‡∏ó ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 147 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î‡∏Å‡∏µ‡πà‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå?',opts:['16%','28%','14%'],key:0},
{id:'017',stem:'‡∏ó‡∏∏‡∏ô 825 ‡∏ö‡∏≤‡∏ó ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÑ‡∏£ 16% ‡∏Ñ‡∏ß‡∏£‡∏Ç‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['957 ‡∏ö‡∏≤‡∏ó','132 ‡∏ö‡∏≤‡∏ó','960 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'018',stem:'‡∏™‡∏°‡∏∏‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏•‡πà‡∏°‡∏•‡∏∞ 28 ‡∏ö‡∏≤‡∏ó ‡∏Ç‡∏≤‡∏¢ 35 ‡∏ö‡∏≤‡∏ó ‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['25%','20%','30%'],key:0},
{id:'019',stem:'‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤ 5% ‡∏à‡∏≤‡∏Å‡∏õ‡πâ‡∏≤‡∏¢ 1,860 ‡∏ö‡∏≤‡∏ó ‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['1,767 ‡∏ö‡∏≤‡∏ó','1,768 ‡∏ö‡∏≤‡∏ó','1,760 ‡∏ö‡∏≤‡∏ó'],key:0},
{id:'020',stem:'‡∏ú‡πâ‡∏≤‡∏Ç‡∏ô‡∏´‡∏ô‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤ 380 ‡∏ö‡∏≤‡∏ó ‡∏•‡∏î 5% ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',opts:['361 ‡∏ö‡∏≤‡∏ó','362 ‡∏ö‡∏≤‡∏ó','360 ‡∏ö‡∏≤‡∏ó'],key:0}
];

const $=id=>document.getElementById(id);
function shuffle(a){a=a.slice();for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function shuffleChoices(it){const arr=it.opts.map((v,i)=>({v,i}));const sh=shuffle(arr);
it.opts=sh.map(x=>x.v);it.key=sh.findIndex(x=>x.i===it.key);return it;}

let idx=0,total=0,combo=1.0,answered=false;
const elTotal=$("total"),elCombo=$("combo"),secHome=$("home"),secQuiz=$("quiz"),secEnd=$("end"),
elCaseId=$("caseId"),elStem=$("stem"),elChoices=$("choices"),elStatus=$("status"),elNext=$("nextBtn"),elSlot=$("slot");

function okSFX(){try{const a=new AudioContext();const o=a.createOscillator(),g=a.createGain();
o.type='triangle';o.frequency.value=900;g.gain.value=.1;o.connect(g);g.connect(a.destination);o.start();
setTimeout(()=>o.stop(),150);}catch{}}
function badSFX(){try{const a=new AudioContext();const o=a.createOscillator(),g=a.createGain();
o.type='sawtooth';o.frequency.value=300;g.gain.value=.1;o.connect(g);g.connect(a.destination);
o.start();setTimeout(()=>o.stop(),300);}catch{}}

function render(){
  answered=false;elNext.disabled=true;elStatus.textContent='';
  const it=shuffleChoices(ITEMS[idx]);
  elCaseId.textContent=`Q-${it.id}`;elStem.textContent=it.stem;elChoices.innerHTML='';
  it.opts.forEach((op,i)=>{
    const b=document.createElement('button');
    b.className='choice';b.innerHTML=`<b>${String.fromCharCode(65+i)}.</b> ${op}`;
    b.onclick=()=>answer(i,b,it);
    elChoices.appendChild(b);
  });
}
function answer(i,btn,it){
  if(answered)return;answered=true;
  const nodes=[...document.querySelectorAll('.choice')];
  nodes.forEach(n=>n.disabled=true);
  if(i===it.key){
    okSFX();btn.classList.add('correct');
    combo=Math.min(1.5,+(combo+0.1).toFixed(1));
    total+=Math.round(5*combo);
    elStatus.innerHTML=`‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! +${Math.round(5*combo)} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`;
  }else{
    badSFX();btn.classList.add('wrong');
    nodes[it.key].classList.add('correct');
    combo=1.0;
    elStatus.innerHTML=`‚ùå ‡∏ú‡∏¥‡∏î ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠ ${it.opts[it.key]}`;
  }
  elTotal.textContent=total;elCombo.textContent=`x${combo.toFixed(1)}`;
  elNext.disabled=false;
}
function nextQ(){idx++;if(idx<ITEMS.length){render();}else{finish();}}
function finish(){
  secQuiz.style.display='none';secEnd.style.display='block';
  $("endMsg").innerHTML=`‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${total} ‡∏à‡∏≤‡∏Å ${ITEMS.length*10}<br>‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å!`;
  fireworks($("fire1"));
}
function fireworks(c){const ctx=c.getContext('2d');c.width=innerWidth;c.height=innerHeight;const p=[];
for(let k=0;k<6;k++){const cx=Math.random()*c.width,cy=Math.random()*c.height*.5+100,col=`hsl(${Math.random()*360},90%,60%)`;
for(let i=0;i<50;i++){const a=Math.random()*Math.PI*2,sp=Math.random()*3+1;
p.push({x:cx,y:cy,vx:Math.cos(a)*sp,vy:Math.sin(a)*sp,life:80,color:col});}}let t=0;
(function loop(){t++;ctx.fillStyle='rgba(0,0,0,.06)';ctx.fillRect(0,0,c.width,c.height);
p.forEach(e=>{e.x+=e.vx;e.y+=e.vy;e.vy+=.03;e.life--;ctx.fillStyle=e.color;ctx.fillRect(e.x,e.y,2,2);});
if(t<150)requestAnimationFrame(loop);})();}

$("startBtn").onclick=()=>{idx=0;total=0;combo=1;secHome.style.display='none';secQuiz.style.display='block';render();};
$("nextBtn").onclick=nextQ;
</script>
</body>
</html>
